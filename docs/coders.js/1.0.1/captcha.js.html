<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>captcha.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Captcha.html">Captcha</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Dankmemer.html">Dankmemer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Dankmemer.html#abandon">abandon</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Dankmemer.html#aborted">aborted</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Markdown.html">Markdown</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Markdown.html#format">format</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Markdown.html#toCodeblock">toCodeblock</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Pagination.html">Pagination</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Pagination.html#send">send</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Pagination.html#setButtonCount">setButtonCount</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Pagination.html#setEmojis">setEmojis</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Pagination.html#setStyle">setStyle</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Pagination.html#setTime">setTime</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Utils.html">Utils</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Utils.html#chunk">chunk</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Utils.html#ms">ms</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Utils.html#shuffleArray">shuffleArray</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Utils.html#StringToMs">StringToMs</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">captcha.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const Canvas = require('canvas');

Canvas.registerFont(require("path").resolve(__dirname, '../../assets/fonts/Swift.ttf'), { family: 'swift' });

const randomText = () => Math.random().toString(36).replace(/[^a-z]|[gkqr]+/gi, '').substr(0, 6).toUpperCase(),
    shuffleArray = (array) => {
        let i = array.length, temp, randomIndex;
        while (0 !== i) {
            randomIndex = Math.floor(Math.random() * i);
            i -= 1;
            temp = array[i];
            array[i] = array[randomIndex];
            array[randomIndex] = temp;
        }
        return array;
    };

class Captcha {
    /**
     * @constructor
     * @param {Number} width Width of captcha
     * @returns {String} Return captcha
     */
    constructor(_number = 250) {
        _number = typeof _number !== 'number' || _number &lt; 250 ? 250 : _number;
        this._canvas = Canvas.createCanvas(400, _number);
        this._value = randomText();
        this.ctx = this._canvas.getContext('2d');
        this.ctx.globalAlpha = 1;
        this.ctx.fillStyle = '#ffffff';
        this.ctx.fillRect(0, 0, 400, _number);
        this.ctx.save();

        this.ctx.strokeStyle = '#000';
        this.ctx.lineWidth = 4;
        this.ctx.beginPath()
        const coords = [];
        for (let i = 0; i &lt; 4; i++) {
            if (!coords[i]) coords[i] = [];
            for (let j = 0; j &lt; 5; j++) coords[i][j] = (Math.round(Math.random() * 80) + j * 80);
            if (!(i % 2)) coords[i] = shuffleArray(coords[i]);
        }
        for (let i = 0; i &lt; coords.length; i++) {
            if (!(i % 2)) {
                for (let j = 0; j &lt; coords[i].length; j++) {
                    if (!i) {
                        this.ctx.moveTo(coords[i][j], 0);
                        this.ctx.lineTo(coords[i + 1][j], 400);
                    } else {
                        this.ctx.moveTo(0, coords[i][j]);
                        this.ctx.lineTo(400, coords[i + 1][j]);
                    }
                }
            }
        }
        this.ctx.stroke();

        this.ctx.fillStyle = '#000';
        this.ctx.lineWidth = 0;

        for (let i = 0; i &lt; 200; i++) {
            this.ctx.beginPath();
            this.ctx.arc(
                Math.round(Math.random() * 360) + 20,
                Math.round(Math.random() * 360) + 20,
                Math.round(Math.random() * 7) + 1, 0, Math.PI * 2,
            );
            this.ctx.fill();
        }
        this.ctx.font = 'bold 50px swift';
        this.ctx.fillStyle = '#000';
        this.ctx.textAlign = 'center';
        this.ctx.textBaseline = 'top';
        this.ctx.translate(0, _number)
        this.ctx.translate(
            Math.round(Math.random() * 100 - 50) + 200,
            -1 * Math.round(Math.random() * (_number / 4) - (_number / 8) - _number / 2),
        );
        this.ctx.rotate(Math.random() - 0.5);
        this.ctx.beginPath();
        // value for captcha
        this._value = '';
        while (this._value.length !== 6) this._value = randomText();
        this.ctx.fillText(this._value, 0, 0);
        this.ctx.restore();
        for (let i = 0; i &lt; 5000; i++) {
            this.ctx.beginPath();
            let color = "#";
            while (color.length &lt; 7) color += Math.round(Math.random() * 16).toString(16);
            color += "a0";
            this.ctx.fillStyle = color;
            this.ctx.arc(
                Math.round(Math.random() * 400), // X coordinate
                Math.round(Math.random() * _number), // Y coordinate
                Math.random() * 2, // Radius
                0, // Start angle
                Math.PI * 2 // End angle
            );
            this.ctx.fill();
        }
    }
    /**
     * @param {Number} value Value to check
     * @returns {Boolean} Return true if value is correct
     */
    get value() {
        return this._value;
    }
    /**
     * @returns {Canvas.PNGStream} Return stream
     */
    get PNGStream() {
        return this._canvas.createPNGStream();
    }
    /**
     * @returns {Canvas.JPEGStream} Return stream
     */
    get JPEGStream() {
        return this._canvas.createJPEGStream();
    }
    /**
     * @param {Canvas.toBuffer} buffer Buffer to pipe
     * @returns {Buffer} Return buffer
     */
    get dataURL() {
        return this._canvas.toDataURL("image/jpeg");
    }
}
module.exports = Captcha;</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.11</a> on Fri Sep 30 2022 14:09:49 GMT+0530 (India Standard Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
